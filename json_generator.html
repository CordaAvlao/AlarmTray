<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GÃ©nÃ©rateur de Planning BeepScheduler</title>
    <style>
        body { font-family: system-ui, -apple-system, sans-serif; max-width: 800px; margin: 2rem auto; padding: 0 1rem; background: #f4f4f9; color: #333; }
        h1 { text-align: center; color: #2c3e50; }
        .container { background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .day-row { display: flex; align-items: center; margin-bottom: 1rem; border-bottom: 1px solid #eee; padding-bottom: 1rem; }
        .day-name { width: 100px; font-weight: bold; text-transform: capitalize; }
        .times-container { flex: 1; display: flex; flex-wrap: wrap; gap: 0.5rem; }
        .time-tag { background: #e0e7ff; color: #3730a3; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.9rem; display: flex; align-items: center; gap: 0.5rem; }
        .time-tag button { background: none; border: none; color: #ef4444; cursor: pointer; font-weight: bold; padding: 0; font-size: 1rem; line-height: 1; }
        .add-time { display: flex; gap: 0.5rem; align-items: center; }
        input[type="time"] { padding: 0.25rem; border: 1px solid #ccc; border-radius: 4px; }
        button.add-btn { background: #10b981; color: white; border: none; padding: 0.25rem 0.75rem; border-radius: 4px; cursor: pointer; }
        button.add-btn:hover { background: #059669; }
        textarea { width: 100%; height: 200px; margin-top: 1rem; padding: 1rem; border: 1px solid #ccc; border-radius: 4px; font-family: monospace; }
        .actions { margin-top: 2rem; text-align: center; }
        .copy-btn { background: #3b82f6; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 4px; cursor: pointer; font-size: 1rem; }
        .copy-btn:hover { background: #2563eb; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ“… Planificateur de Bips</h1>
        <p>Ajoutez des horaires pour chaque jour, puis copiez le rÃ©sultat dans votre fichier <code>schedule.json</code>.</p>
        
        <div id="days-container"></div>

        <div class="actions">
            <h3>RÃ©sultat JSON</h3>
            <textarea id="output" readonly></textarea>
            <br><br>
            <button class="copy-btn" onclick="copyToClipboard()">ðŸ“‹ Copier le JSON</button>
        </div>
    </div>

    <script>
        const days = ['lundi', 'mardi', 'mercredi', 'jeudi', 'vendredi', 'samedi', 'dimanche'];
        // Default schedule based on user request
        const schedule = {
            "lundi": ["08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","17:30"],
            "mardi": ["08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","17:30"],
            "mercredi": ["08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","17:30"],
            "jeudi": ["08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","17:30"],
            "vendredi": ["08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","16:30"],
            "samedi": [],
            "dimanche": []
        };

        function render() {
            const container = document.getElementById('days-container');
            container.innerHTML = '';

            days.forEach(day => {
                const row = document.createElement('div');
                row.className = 'day-row';
                
                const name = document.createElement('div');
                name.className = 'day-name';
                name.textContent = day;
                
                const timesDiv = document.createElement('div');
                timesDiv.className = 'times-container';
                
                // Sort times
                schedule[day].sort();

                schedule[day].forEach((time, index) => {
                    const tag = document.createElement('div');
                    tag.className = 'time-tag';
                    tag.innerHTML = `${time} <button onclick="removeTime('${day}', ${index})">Ã—</button>`;
                    timesDiv.appendChild(tag);
                });

                const addDiv = document.createElement('div');
                addDiv.className = 'add-time';
                addDiv.innerHTML = `
                    <input type="time" id="input-${day}">
                    <button class="add-btn" onclick="addTime('${day}')">+</button>
                `;
                timesDiv.appendChild(addDiv);

                row.appendChild(name);
                row.appendChild(timesDiv);
                container.appendChild(row);
            });

            updateJson();
        }

        function addTime(day) {
            const input = document.getElementById(`input-${day}`);
            if (input.value && !schedule[day].includes(input.value)) {
                schedule[day].push(input.value);
                render();
            }
        }

        function removeTime(day, index) {
            schedule[day].splice(index, 1);
            render();
        }

        function updateJson() {
            const json = JSON.stringify(schedule, null, 2);
            document.getElementById('output').value = json;
        }

        function copyToClipboard() {
            const output = document.getElementById('output');
            output.select();
            document.execCommand('copy');
            alert('JSON copiÃ© ! Collez-le dans votre fichier schedule.json');
        }

        render();
    </script>
</body>
</html>
